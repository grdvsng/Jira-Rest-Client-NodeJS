<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tests/test.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tests/test.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Tests
 * @author &lt;a href="mailto:grdvsng@gmail.com">Trishkin Sergey&lt;/a>
 */


/** 
 * Test interface.
 */
class Test
{
	/**
     * Create new client.
     * @param {String} method - name of method.
     * @param {Array.&lt;Object>} params - method arguments.
     * @param {Error} exec - Exeception if test catch Error.
     * @returns {void}
     */
	constructor(method, params, exec)
	{
		this.method = method;
		this.params = params;
		this.exec   = exec;
	}
}


/** 
 * Class for Testing.
 */
class UnitTester
{
	/**
     * Create new client.
     * @param {Object} basicClass - clas will testing.
     * @returns {void}
     */
	constructor(basicClass)
	{
		try 
		{
			this.testClass = new basicClass(...Array.from(arguments).slice(1,));
		} catch (e) {
			console.warn(`Can't create exemplar of ${basicClass.className}.\nError: `);
			throw e;
		}
	}
	
	/**
     * Create new client.
     * @param {Test} test - test to run.
     * @returns {string}
     */
	async runTest(test)
	{
		let msg = `\nMethod: ${test.method} \nError: `;

		try
		{
			await this.testClass[test.method](...test.params);
			msg += `not found`;
		} catch (e) {
			if (e instanceof test.exec) 
			{
				msg += `${test.exec}`;
			} else {throw e;}
		}

		console.warn(msg);

		return msg;
	}

	/**
     * Create new client.
     * @param {Array.&lt;Test>} test - tests to run.
     * @returns {void}
     */
	async runTests(tests)
	{
		for (let n=0; n &lt; tests.length; n++)
		{
			let test = await tests[n];

			await this.runTest(test);
		}
	}
}


let params = 
{
	"log":      "./test.log",
	"host":     "localhost",
	"port":     "8080",
	"protocol": "http",

	"headers":
	{
		"Content-Type": "application/json"
	},
};

let auth = 
{
	type: 'basic',
	data: 
	{
		username: 'admin',
		password: 'admin'
	}
};

let tests = 
[
	new Test('_request',            [{path: "rest/api/2/search", data: {jql: "",startAt: 0, maxResults: 50}}]),
	new Test('search',              ["project = Test And resolution = Unresolved", 0, 50]),
	new Test('getIsue',             ['Test-1']),
	new Test('createUser',          [{"displayName":  "John Travolta", "name": "scientology666", "applicationKeys": []}]),
	new Test('getUser',             ["scientology666"]),
	new Test('getProjectRoles',     ["Test"]),
	new Test('getRoleId',           ["Administrator", "Test"]),
	new Test('addUserInProject',    ["scientology666", "Test", "Administrator"]),
	new Test('addUserInGroup',      ["scientology666", "jira-software-users"]),
	new Test('removeUserFromGroup', ["scientology666", "jira-software-users"]),
	new Test('generateBasicAuth',   ["project = Test And resolution = Unresolved", 0, 50]),
	new Test('createSession',       ["project = Test And resolution = Unresolved", 0, 50]),
	new Test('deleteUser',          ["scientology666"])
];


let TESTER = new UnitTester(require('../bin/JiraClient')['JiraClient'], params, auth);
TESTER.runTests(tests);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_Logger.html">_Logger</a></li><li><a href="-_Request.html">_Request</a></li><li><a href="-_Response.html">_Response</a></li><li><a href="BasicAuth.html">BasicAuth</a></li><li><a href="EventsHandler.html">EventsHandler</a></li><li><a href="InnerError.html">InnerError</a></li><li><a href="JiraClient.html">JiraClient</a></li><li><a href="Session.html">Session</a></li><li><a href="Test.html">Test</a></li><li><a href="UnitTester.html">UnitTester</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_InnerErrors">_InnerErrors</a></li><li><a href="global.html#atob">atob</a></li><li><a href="global.html#btoa">btoa</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Oct 15 2019 22:00:53 GMT+0300 (GMT+03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
